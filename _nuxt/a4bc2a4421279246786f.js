(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{1233:function(e,t,r){"use strict";r.r(t);var n,o,c,m,d,f,l,h,w,O,v,E,S,T,k,x,_,j=r(78),P=(r(43),r(141),r(61),r(3)),R=r(11),N=r(389),A=r(53),I=(r(2),r(445),r(538),r(245)),y={miniProposeLockH:function(e){return Object(R.fromWei)(e.miniProposeLock)},voteInstance:function(e,t,r,n){return Object(P.a)(regeneratorRuntime.mark((function e(){var t,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metamask,o=t.ethAccount,c=t.netId,m=A.a["netId".concat(c)].voteContract,e.next=4,n["metamask/web3"]();case 4:return d=e.sent,e.abrupt("return",new d.eth.Contract(N,m,{from:o}));case 6:case"end":return e.stop()}}),e)})))},voteQueryInstance:function(e,t,r,n){return Object(P.a)(regeneratorRuntime.mark((function e(){var t,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metamask,t.ethAccount,o=t.netId,c=A.a["netId".concat(o)].voteContract,e.next=4,n["metamask/queryWeb3"]();case 4:return m=e.sent,e.abrupt("return",new m.eth.Contract(N,c,{}));case 6:case"end":return e.stop()}}),e)})))}},C={initBaseParams:(_=Object(P.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=t.getters,n=t.dispatch,o=t.commit,c=t.rootState,e.next=3,r.voteInstance();case 3:m=e.sent,o("SET_VOTE_ADDRESS",m._address),d=c.metamask.netId,f=A.a["netId".concat(d)].explorerUrl,o("SET_TX_URL",f.tx),o("SET_ADDRESS_URL",f.address),n("getVotePagrams"),n("getProposes");case 11:case"end":return e.stop()}}),e)}))),function(e){return _.apply(this,arguments)}),resetBaseParams:(x=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,content,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.dispatch,o=t.commit,c=t.rootState,content=r.content,m=r.edit,d=void 0!==m&&m,o("SET_PROPOSE_TX",""),o("SET_PROPOSE_STATUS",-1),o("SET_VOTE_TX",""),o("SET_VOTE_STATUS",-1),!d)try{f=c.metamask.ethAccount,(l=Object.assign([],n.proposes)).push({id:n.proposeId,proposer:f,content:content,deposit:n.miniProposeLock,depositH:Object(R.fromWei)(n.miniProposeLock),voteCountH:0,voteCount:0}),o("SET_PROPOSES",l)}catch(e){console.info(e)}case 7:case"end":return e.stop()}}),e)}))),function(e,t){return x.apply(this,arguments)}),getVotePagrams:(k=Object(P.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,r=t.commit,n=t.dispatch,o=t.getters,c=t.rootGetters,t.state,m=c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var d=function(){var f=Object(P.a)(regeneratorRuntime.mark((function f(l){var h,w,O,v,E,S,T,k,x,_,j,P,N,A,I,y,C,F,D,G,L,M;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,w=void 0===h?1:h,w++,f.prev=2,O="0x000000000000000000000000000000000000d001",f.next=6,o.voteQueryInstance();case 6:return v=f.sent,E=v.methods.minProposeLockAmount().encodeABI(),S=v.methods.proposeStartTime().encodeABI(),T=v.methods.proposeEndTime().encodeABI(),k=v.methods.voteEndTime().encodeABI(),x=v.methods.minVoteBalance().encodeABI(),_=v.methods.proposalID().encodeABI(),j=v.methods.name().encodeABI(),(P=[]).push({method:"eth_call",params:[{from:O,to:v._address,data:E},"latest"]},{method:"eth_call",params:[{from:O,to:v._address,data:S},"latest"]},{method:"eth_call",params:[{from:O,to:v._address,data:T},"latest"]},{method:"eth_call",params:[{from:O,to:v._address,data:k},"latest"]},{method:"eth_call",params:[{from:O,to:v._address,data:x},"latest"]},{method:"eth_call",params:[{from:O,to:v._address,data:_},"latest"]},{method:"eth_call",params:[{from:O,to:v._address,data:j},"latest"]}),N={params:P},A=c["metamask/networkConfig"].rpcUrl,N.rpcUrl=A,f.next=21,n("metamask/sendJSONRPCRequest",N,{root:!0});case 21:(I=f.sent)&&(y=Object(R.hexToNumberString)(I[0]),C=Object(R.hexToNumber)(I[1]),F=Object(R.hexToNumber)(I[2]),D=Object(R.hexToNumber)(I[3]),G=Object(R.hexToNumberString)(I[4]),L=Object(R.hexToNumber)(I[5]),M=Object(R.hexToUtf8)(I[6]),r("SET_MINI_PROPOSE_LOCK",y),r("SET_PROPOSE_START_TIME",C),r("SET_PROPOSE_END_TIME",F),r("SET_VOTE_ENDTIME",D),r("SET_MINI_VOTE",G),r("SET_PROPOSE_ID",L),r("SET_PROPOSE_NAME",M)),e(I),f.next=29;break;case 26:f.prev=26,f.t0=f.catch(2),w>=m?t(f.t0):d({retryAttempt:w});case 29:case"end":return f.stop()}}),f,null,[[2,26]])})));return function(e){return f.apply(this,arguments)}}();d({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)}),getProposes:(T=Object(P.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,r=t.commit,n=t.dispatch,o=t.getters,c=t.rootGetters,m=t.state,d=c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var f=function(){var l=Object(P.a)(regeneratorRuntime.mark((function l(h){var w,O,v,E,S,T,k,x,_,j,P;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return w=h.retryAttempt,O=void 0===w?1:w,O++,l.prev=2,v="0x000000000000000000000000000000000000d001",l.next=6,o.voteQueryInstance();case 6:for(E=l.sent,S=[],T=1;T<m.proposeId;T++)k=E.methods.proposals(T).encodeABI(),S.push({method:"eth_call",params:[{from:v,to:E._address,data:k},"latest"]});return x={params:S},_=c["metamask/networkConfig"].rpcUrl,x.rpcUrl=_,l.next=14,n("metamask/sendJSONRPCRequest",x,{root:!0});case 14:j=l.sent,P=[],j.forEach((function(e,i){var t=I.decodeParameters([{name:"id",type:"uint256"},{name:"proposer",type:"address"},{name:"content",type:"string"},{name:"deposit",type:"uint256"},{name:"voteCount",type:"uint256"}],e),r=t.id,n=t.proposer,content=t.content,o=t.deposit,c=t.voteCount;parseInt(r)&&P.push({id:r,proposer:n,content:content,deposit:o,depositH:Object(R.fromWei)(o),voteCountH:Object(R.fromWei)(c),voteCount:c})})),P.sort((function(a,b){return b.voteCount-a.voteCount})),r("SET_PROPOSES",P),e(P),l.next=25;break;case 22:l.prev=22,l.t0=l.catch(2),O>=d?t(l.t0):f({retryAttempt:O});case 25:case"end":return l.stop()}}),l,null,[[2,22]])})));return function(e){return l.apply(this,arguments)}}();f({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return T.apply(this,arguments)}),getPropose:(S=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,t.commit,n=t.dispatch,o=t.getters,c=t.rootGetters,t.state,m=r.proposeId,d=c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var r=function(){var f=Object(P.a)(regeneratorRuntime.mark((function f(l){var h,w,O,v,E,S,T,k,x,_,j,P,content,N,A,y;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,w=void 0===h?1:h,w++,f.prev=2,O="0x000000000000000000000000000000000000d001",f.next=6,o.voteQueryInstance();case 6:return v=f.sent,E=v.methods.proposals(m).encodeABI(),S={method:"eth_call",params:[{from:O,to:v._address,data:E},"latest"]},T={params:S},k=c["metamask/networkConfig"].rpcUrl,T.rpcUrl=k,f.next=14,n("metamask/sendJSONRPCRequest",T,{root:!0});case 14:x=f.sent,_=I.decodeParameters([{name:"id",type:"uint256"},{name:"proposer",type:"address"},{name:"content",type:"string"},{name:"deposit",type:"uint256"},{name:"voteCount",type:"uint256"}],x),j=_.id,P=_.proposer,content=_.content,N=_.deposit,A=_.voteCount,y={id:j,proposer:P,content:content,deposit:N,voteCount:A,depositH:Object(R.fromWei)(N),voteCountH:Object(R.fromWei)(A)},e(y),f.next=23;break;case 20:f.prev=20,f.t0=f.catch(2),w>=d?t(f.t0):r({retryAttempt:w});case 23:case"end":return f.stop()}}),f,null,[[2,20]])})));return function(e){return f.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)}),displayRecs:(E=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,t.commit,n=t.dispatch,o=t.getters,c=t.rootGetters,t.state,m=r.proposeId,d=c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var r=function(){var f=Object(P.a)(regeneratorRuntime.mark((function f(l){var h,w,O,v,E,S,T,k,x,_,j,P,N;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,w=void 0===h?1:h,w++,f.prev=2,O="0x000000000000000000000000000000000000d001",f.next=6,o.voteQueryInstance();case 6:return v=f.sent,E=v.methods.displayRecs(m,0,300).encodeABI(),S={method:"eth_call",params:[{from:O,to:v._address,data:E},"latest"]},T={params:S},k=c["metamask/networkConfig"].rpcUrl,T.rpcUrl=k,f.next=14,n("metamask/sendJSONRPCRequest",T,{root:!0});case 14:x=f.sent,_=I.decodeParameters([{name:"addresses",type:"address[]"},{name:"votes",type:"uint256[]"}],x),j=_.addresses,P=_.votes,N=[],j.forEach((function(e,i){"0x0000000000000000000000000000000000000000"!=e&&0!=P[i]&&"0"!=P[i]&&N.push({address:e,votes:P[i],votesH:Object(R.fromWei)(P[i])})})),N.sort((function(a,b){return b.votes-a.votes})),e(N),f.next=25;break;case 22:f.prev=22,f.t0=f.catch(2),w>=d?t(f.t0):r({retryAttempt:w});case 25:case"end":return f.stop()}}),f,null,[[2,22]])})));return function(e){return f.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)}),propose:(v=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,c=r.propose,e.next=4,n("_propose",{propose:c});case 4:if(null==(m=e.sent)||null==m){e.next=14;break}return console.info("txHash",m),o("SET_PROPOSE_TX",m),o("SET_PROPOSE_STATUS",0),n("checkProposeTransactionStatus",{txHash:m}),e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)}),updatePropose:(O=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,c=r.propose,m=r.proposeId,e.next=4,n("_updatePropose",{proposeId:m,propose:c});case 4:if(null==(d=e.sent)||null==d){e.next=14;break}return console.info("txHash",d),o("SET_PROPOSE_TX",d),o("SET_PROPOSE_STATUS",0),n("checkProposeTransactionStatus",{txHash:d}),e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return O.apply(this,arguments)}),votePropose:(w=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,c=r.proposeId,e.next=4,n("_vote",{proposeId:c});case 4:if(null==(m=e.sent)||null==m){e.next=14;break}return console.info("txHash",m),o("SET_VOTE_TX",m),o("SET_VOTE_STATUS",0),n("checkVoteTransactionStatus",{txHash:m}),e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return w.apply(this,arguments)}),deletePropose:(h=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,c=r.proposeId,e.next=4,n("_deletePropose",{proposeId:c});case 4:if(null==(m=e.sent)||null==m){e.next=13;break}return o("SET_DELETE_TX",m),o("SET_DELETE_STATUS",0),n("checkDeleteProposeTransactionStatus",{txHash:m}),e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)}))),function(e,t){return h.apply(this,arguments)}),_updatePropose:(l=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,d=r.proposeId,f=r.propose,l=void 0===f?"I create a propose":f,e.abrupt("return",new Promise((function(e,t){!function(){var r=Object(P.a)(regeneratorRuntime.mark((function r(f){var h,w,O,data,v,E,S;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Object(j.a)(f),r.prev=1,c.metamask.gasPrice.fast,h=c.metamask.ethAccount,r.next=6,o.voteInstance();case 6:return w=r.sent,O=w._address,data=w.methods.editProposal(d,l).encodeABI(),v=5e5,r.prev=10,r.next=13,w.methods.propose(l).estimateGas({from:h,value:Object(R.toHex)(n.miniProposeLock)});case 13:v=r.sent,r.next=18;break;case 16:r.prev=16,r.t0=r.catch(10);case 18:return E={method:"eth_sendTransaction",params:[{from:h,to:O,gas:Object(R.numberToHex)(v),value:Object(R.toHex)(n.miniProposeLock),data:data}],from:h},r.next=21,m("metamask/sendAsync",E,{root:!0});case 21:S=r.sent,console.info(S),e(S),r.next=29;break;case 26:r.prev=26,r.t1=r.catch(1),t(r.t1);case 29:case"end":return r.stop()}}),r,null,[[1,26],[10,16]])})));return function(e){return r.apply(this,arguments)}}()({})})));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)}),_propose:(f=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,d=r.propose,f=void 0===d?"I create a propose":d,e.abrupt("return",new Promise((function(e,t){!function(){var r=Object(P.a)(regeneratorRuntime.mark((function r(d){var l,h,w,data,O,v,E;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Object(j.a)(d),r.prev=1,c.metamask.gasPrice.fast,l=c.metamask.ethAccount,r.next=6,o.voteInstance();case 6:return h=r.sent,w=h._address,data=h.methods.propose(f).encodeABI(),O=5e5,r.prev=10,r.next=13,h.methods.propose(f).estimateGas({from:l,value:Object(R.toHex)(n.miniProposeLock)});case 13:O=r.sent,r.next=18;break;case 16:r.prev=16,r.t0=r.catch(10);case 18:return v={method:"eth_sendTransaction",params:[{from:l,to:w,gas:Object(R.numberToHex)(O),value:Object(R.toHex)(n.miniProposeLock),data:data}],from:l},r.next=21,m("metamask/sendAsync",v,{root:!0});case 21:E=r.sent,console.info(E),e(E),r.next=29;break;case 26:r.prev=26,r.t1=r.catch(1),t(r.t1);case 29:case"end":return r.stop()}}),r,null,[[1,26],[10,16]])})));return function(e){return r.apply(this,arguments)}}()({})})));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)}),checkProposeTransactionStatus:(d=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,o=t.commit,c=r.txHash,m=10,e.prev=3,e.next=6,n("metamask/getTransactionReceipt",{txHash:c},{root:!0});case 6:null!=(d=e.sent)?(f=d.status,o("SET_PROPOSE_STATUS",f="0x1"==f||1==f?1:-2),o("SET_PROPOSE_TX",c)):setTimeout((function(){n("checkProposeTransactionStatus",{txHash:c})}),1e3*m),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){n("checkProposeTransactionStatus",{txHash:c})}),1e3*m);case 14:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(e,t){return d.apply(this,arguments)}),checkVoteTransactionStatus:(m=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,o=t.commit,c=r.txHash,m=10,e.prev=3,e.next=6,n("metamask/getTransactionReceipt",{txHash:c},{root:!0});case 6:null!=(d=e.sent)?(f=d.status,o("SET_VOTE_STATUS",f="0x1"==f||1==f?1:-2),o("SET_VOTE_TX",c)):setTimeout((function(){n("checkVoteTransactionStatus",{txHash:c})}),1e3*m),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){n("checkVoteTransactionStatus",{txHash:c})}),1e3*m);case 14:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(e,t){return m.apply(this,arguments)}),checkDeleteProposeTransactionStatus:(c=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,o=t.commit,c=r.txHash,m=10,e.prev=3,e.next=6,n("metamask/getTransactionReceipt",{txHash:c},{root:!0});case 6:null!=(d=e.sent)?(f=d.status,o("SET_DELETE_STATUS",f="0x1"==f||1==f?1:-2),o("SET_DELETE_TX",c)):setTimeout((function(){n("checkDeleteProposeTransactionStatus",{txHash:c})}),1e3*m),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){n("checkDeleteProposeTransactionStatus",{txHash:c})}),1e3*m);case 14:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(e,t){return c.apply(this,arguments)}),_deletePropose:(o=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,m=r.proposeId,e.abrupt("return",new Promise((function(e,t){!function(){var r=Object(P.a)(regeneratorRuntime.mark((function r(){var d,f,l,data,h,w;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d=o.metamask.ethAccount,r.next=4,n.voteInstance();case 4:return f=r.sent,l=f._address,data=f.methods.disableProposal(m).encodeABI(),h={method:"eth_sendTransaction",params:[{from:d,to:l,gas:Object(R.numberToHex)(3e5),value:Object(R.toHex)(0),data:data}],from:d},r.next=10,c("metamask/sendAsync",h,{root:!0});case 10:w=r.sent,e(w),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),t(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(){return r.apply(this,arguments)}}()({})})));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),_vote:(n=Object(P.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,m=r.proposeId,e.abrupt("return",new Promise((function(e,t){!function(){var r=Object(P.a)(regeneratorRuntime.mark((function r(){var d,f,l,data,h,w;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d=o.metamask.ethAccount,r.next=4,n.voteInstance();case 4:return f=r.sent,l=f._address,data=f.methods.vote(m).encodeABI(),h={method:"eth_sendTransaction",params:[{from:d,to:l,gas:Object(R.numberToHex)(3e5),value:Object(R.toHex)(0),data:data}],from:d},r.next=10,c("metamask/sendAsync",h,{root:!0});case 10:w=r.sent,e(w),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),t(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(){return r.apply(this,arguments)}}()({})})));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})};t.default={namespaced:!0,state:function(){return{voteAddress:"",poolSize:0,fee:5e18,addressUrl:"",txUrl:"",divisor:3,remainder:1,txs:{},voteTxHash:"",proposeTxHash:"",voteStatus:-1,proposeStatus:-1,miniProposeLock:1e21,miniVote:1e18,proposeStartTime:0,proposeEndTime:0,voteEndTime:0,proposeId:200,proposes:null,deleteStatus:-1,deleteTxHash:"",name:null}},getters:y,mutations:{SET_VOTE_ADDRESS:function(e,address){e.voteAddress=address},SET_PROPOSES:function(e,t){e.proposes=t},SET_RECORDS:function(e,t){e.records=t},SET_DELETE_STATUS:function(e,t){e.deleteStatus=t},SET_DELETE_TX:function(e,t){e.deleteTxHash=t},SET_ADDRESS_URL:function(e,t){e.addressUrl=t},SET_TX_URL:function(e,t){e.txUrl=t},SET_PROPOSE_STATUS:function(e,t){e.proposeStatus=t},SET_PROPOSE_ID:function(e,t){e.proposeId=t},SET_PROPOSE_NAME:function(e,t){e.name=t},SET_VOTE_STATUS:function(e,t){e.voteStatus=t},SET_PROPOSE_TX:function(e,t){e.proposeTxHash=t},SET_VOTE_TX:function(e,t){e.voteTxHash=t},SET_MINI_PROPOSE_LOCK:function(e,t){e.miniProposeLock=t},SET_MINI_VOTE:function(e,t){e.miniVote=t},SET_PROPOSE_START_TIME:function(e,time){e.proposeStartTime=time},SET_PROPOSE_END_TIME:function(e,time){e.proposeEndTime=time},SET_VOTE_ENDTIME:function(e,time){e.voteEndTime=time}},actions:C}},762:function(e,t,r){"use strict";r.r(t);r(80),r(59),r(45),r(60),r(324),r(196),r(197),r(306);var n,o=r(4),c=(r(141),r(195),r(43),r(237),r(316),r(763),r(142),r(61),r(3)),m=r(226),d=r.n(m),f=(r(1264),r(669)),l=r.n(f),h=r(675),w=r.n(h),O=r(11),v=r(53),E=r(2),S=r(388),T=r(79);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _,j,P,R,N,A,I,y,C,F,D,G,L,M,W,V,U,H,B,K,X,J=r(245),Q=r(331),z=function(e){var t=e.newAccount,r=e.commit,n=e.state;n.ethAccount&&n.ethAccount.toLowerCase()!=t[0].toLowerCase()&&(r("IDENTIFY",Object(O.toChecksumAddress)(t[0])),window.location.reload())},Y=function(e){var t=e.netId;e.commit;e.state.netId!=t&&window.location.reload()},Z={netId:function(e){return e.netId},isApiValible:function(e){return 1==e.netId},networkName:function(e){return v.a["netId".concat(e.netId)].networkName},currency:function(e){return v.a["netId".concat(e.netId)]?v.a["netId".concat(e.netId)].currencyName:"ETH"},disableBurnerFeature:function(e){if(v.a["netId".concat(e.netId)]){var t=v.a["netId".concat(e.netId)].disableBurnerFeature;return null!=t&&null!=t&&t}return!1},skipAdvancedChecking:function(e){if(v.a["netId".concat(e.netId)]){var t=v.a["netId".concat(e.netId)].skipAdvancedChecking;return null!=t&&null!=t&&t}return!1},networkConfig:function(e){return v.a["netId".concat(e.netId)]},getEthereumProvider:function(e){return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,m,d,f,h,O,E,S,T,k,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.providerName,e.networkName,n=e.prepareNetId,e.walletName,t.t0=r,t.next="fortmatic"===t.t0?4:"naboxWallet"===t.t0?7:"bitkeep"===t.t0?8:"kaikas"===t.t0?9:"okexWallet"===t.t0?10:"walletConnect"===t.t0?11:"walletLink"===t.t0?20:("mewConnect"===t.t0||t.t0,36);break;case 4:return o=new w.a("pk_live_16BBFE98905B1AA1"),t.abrupt("return",o.getProvider());case 7:return t.abrupt("return",window.NaboxWallet);case 8:return t.abrupt("return",window.bitkeep);case 9:return t.abrupt("return",window.klaytn);case 10:return t.abrupt("return",window.okexchain);case 11:if(!window.walletConnectProviderForMaroVote){t.next=13;break}return t.abrupt("return",window.walletConnectProviderForMaroVote);case 13:return"33ce5130ada2bc0a0f524bcede89c9f4",c={name:"MARO Vote",description:"MARO vote dApp",url:window.location.host,icons:[window.location.host+"/logo_round.png"]},m=window.walletConnectModalSignForMaroVote,d=new m({projectId:"33ce5130ada2bc0a0f524bcede89c9f4",metadata:c,modalOptions:{themeMode:"light",themeVariables:{"--wcm-accent-color":"#333d46","--wcm-z-index":999999,"--wcm-background-color":"#333d46"}}}),window.walletConnectProviderForMaroVote=d,t.abrupt("return",d);case 20:if(!window.coinbaseWalletSDKForMaroVote){t.next=24;break}return t.abrupt("return",window.coinbaseWalletSDKForMaroVote);case 24:for(E in"MARO Vote",f=window.location.host+"/logo_round.png",h=new l.a({appName:"MARO Vote",appLogoUrl:f,darkMode:!1,overrideMetaMask:!1}),O={},v.a)S=parseInt(E.replace("netId","")),O[S]=1==S?"https://rpc.ankr.com/eth":v.a[E].rpcUrl;return T=O[n],k=n,T||(T="https://rpc.ankr.com/eth",k=1),x=h.makeWeb3Provider(T,k),window.coinbaseWalletSDKForMaroVote=x,t.abrupt("return",x);case 35:return t.abrupt("break",37);case 36:return t.abrupt("return",window.ethereum);case 37:case"end":return t.stop()}}),t)})))},customRPCProvider:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new d.a.providers.HttpProvider(r),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))},web3:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEthereumProvider();case 2:return r=e.sent,e.abrupt("return",Object.freeze(new d.a(r)));case 4:case"end":return e.stop()}}),e)})))},queryWeb3:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new d.a.providers.HttpProvider(r),e.abrupt("return",Object.freeze(new d.a(n)));case 3:case"end":return e.stop()}}),e)})))}},$={IDENTIFY:function(e,t){e.ethAccount=t},SET_NET_ID:function(e,t){t=parseInt(t,10),e.netId=t},SET_PREPARE_NET_ID:function(e,t){e.prepareNetId=t},SET_BALANCE:function(e,t){e.balance=Object(O.fromWei)(t)},SET_WALLET_STATE:function(e,t){e.walletState=t},SET_ADDRESS:function(e,t){var address=t.address,r=t.valid,n=void 0!==r&&r;e.address={value:address,valid:n}},SAVE_GAS_PRICE:function(e,t){e.gasPrice=t,e.gasPriceInfoLoaded=!0},SAVE_DEFAULT_GAS_PRICE:function(e,t){e.gasPrice=t},SAVE_GAS_PRICE_INFO_LOADED:function(e,t){e.gasPriceInfoLoaded=t},SAVE_GAS_PRICE_LOADING:function(e,t){e.gasPriceLoading=t},SET_GAS_PRICE_ORACLE_LOCKED:function(e,t){e.gasPriceOracleLocked=t},SAVE_TOKENS:function(e,t){e.tokens=t},SET_TOKEN_ADDRESS:function(e,t){e.tokenAddress=t},SET_FETCHING:function(e,t){e.isFetching=t},SET_PROVIDER_NAME:function(e,t){e.providerName=t},SET_NETWORK_NAME:function(e,t){e.networkName=t},SET_INITIALIZED:function(e,t){e.initialized=t},SET_IS_IMTOKEN:function(e,t){e.isImToken=t},SET_IS_TRUSTWALLET:function(e,t){e.isTrustWallet=t},SET_IS_SIGN_AND_SEND:function(e,t){e.signAndSend=t},SET_WALLET_NAME:function(e,t){e.walletName=t},SAVE_ETH_PRICE:function(e,t){e.ethPrice=t},SET_ETH_PRICE_LOADED:function(e,t){e.ethPriceLoaded=t},SET_QR_MODAL_CLOSED:function(e,t){e.qrModalClosed=t},SET_NETWORK_BASEFEE:function(e,t){e.networkBaseFee=t},SET_SUPPORT_EIP1559:function(e,t){e.supportEIP1559=t}},ee=(n={setAddress:function(e,t){e.dispatch;var r=e.commit,address=t.address;r("SET_ADDRESS",{address:address,valid:address.length>=42&&Object(T.a)(address)})},setTokenAddress:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_ADDRESS",t.address)},setWalletName:function(e,t){var r=e.dispatch,n=e.commit,o=t.walletName;n("SET_WALLET_NAME",o),r("common/saveLastUsedWalletName",{walletName:o},{root:!0})},onNetworkChanged:function(e,t){(0,e.commit)("SET_NET_ID",t.netId)},onChainIdChanged:function(e,t){var r=e.commit,n=t.chainId;r("SET_NET_ID",Object(O.hexToNumber)(n))},onDisconnect:function(e,t){e.commit;var r=t.connected;console.info(r)},closeProvider:(X=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch,t.state,t.getters,n=t.commit,o=r.providerName,e.t0=o,e.next="walletConnect"===e.t0?5:"walletLink"===e.t0?10:"mewConnect"===e.t0?15:20;break;case 5:if(!window.walletConnectProviderForMaroVote){e.next=9;break}return e.next=8,window.walletConnectProviderForMaroVote.disconnect({topic:window.wcSessionForMaroVote.topic});case 8:window.walletConnectProviderForMaroVote=void 0;case 9:return e.abrupt("break",21);case 10:if(!window.coinbaseWalletSDKForMaroVote){e.next=14;break}return e.next=13,window.coinbaseWalletSDKForMaroVote.close();case 13:window.coinbaseWalletSDKForMaroVote=void 0;case 14:return e.abrupt("break",21);case 15:if(!window.connectMewForMaroVote){e.next=19;break}return e.next=18,window.connectMewForMaroVote.disconnect();case 18:window.connectMewForMaroVote=void 0;case 19:case 20:return e.abrupt("break",21);case 21:return n("IDENTIFY",null),n("SET_PROVIDER_NAME",""),n("SET_WALLET_NAME",""),n("SET_PREPARE_NET_ID",1),e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e)}))),function(e,t){return X.apply(this,arguments)}),switchNetwork:(K=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.state,n=t.getters,t.commit,o=r.networkId,c=Object(O.toHex)(o),e.prev=3,e.next=6,ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:c}]});case 6:e.next=33;break;case 8:return e.prev=8,e.t0=e.catch(3),m=v.a["netId".concat(o)],e.next=13,n.getEthereumProvider();case 13:d=e.sent,f={chainId:c,chainName:m.networkName,nativeCurrency:{name:m.currencyName,symbol:m.currencyName,decimals:18},rpcUrls:[m.rpcUrl],blockExplorerUrls:[m.explorerUrl.tx.replace("tx","")]},l=!1;try{l=e.t0.message.includes("networkConfigurationId undefined does not match")}catch(e){}if(4902!==e.t0.code&&!l){e.next=33;break}return e.prev=18,e.next=21,d.request({method:"wallet_addEthereumChain",params:[f]});case 21:e.next=33;break;case 23:e.prev=23,e.t1=e.catch(18),h=!1;try{h=e.t0.message.includes("networkConfigurationId undefined does not match")}catch(e){}if(!e.t1.message.includes("Request for method 'eth_chainId")&&!h){e.next=33;break}return(w=m.rpcUrlBackup)||(w=m.rpcUrl),f.rpcUrls=[w],e.next=33,d.request({method:"wallet_addEthereumChain",params:[f]});case 33:case"end":return e.stop()}}),e,null,[[3,8],[18,23]])}))),function(e,t){return K.apply(this,arguments)}),getBalance:function(e){var t=e.dispatch,r=e.state,n=e.getters.networkConfig.rpcCallRetryAttempt;return new Promise((function(e,o){var m=function(){var d=Object(c.a)(regeneratorRuntime.mark((function c(d){var f,l,h,w;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return f=d.retryAttempt,l=void 0===f?1:f,l++,c.prev=2,h={method:"eth_getBalance",params:[r.ethAccount,"latest"]},c.next=6,t("metamask/sendAsync",h,{root:!0});case 6:w=c.sent,e(w),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),l>=n?o(c.t0):m({retryAttempt:l});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();m({})}))},getAllSupportedNetworks:function(e){e.dispatch,e.commit;return v.a},askPermission:function(e,t){var r=e.commit,n=e.dispatch,o=e.getters,m=e.rootGetters,d=e.state,f=t.providerName,l=t.networkName,h=t.prepareNetId,w=t.walletName;return n("vote/initBaseParams",{},{root:!0}),n("common/initBaseParams",{},{root:!0}),new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,c){var v,E,S,T,k,x,_,j,P,R,N,A,I,y,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_PROVIDER_NAME",f),r("SET_NETWORK_NAME",l),r("SET_PREPARE_NET_ID",h),r("SET_WALLET_NAME",w),r("SET_INITIALIZED",!1),e.next=7,o.getEthereumProvider();case 7:if(v=e.sent,e.prev=8,null==v&&(r("SET_WALLET_STATE",-1),c(new Error("Please Install Metamask"))),E=[],"walletConnect"!=f){e.next=39;break}return e.prev=12,r("SET_WALLET_STATE",0),S=["eth_sendTransaction","eth_signTransaction","eth_signTypedData_v3"],"trustWallet"==w&&(S=["eth_sendTransaction","eth_signTransaction"]),T="eip155:"+h,e.next=19,v.connect({requiredNamespaces:{eip155:{methods:S,chains:[T],events:["chainChanged","accountsChanged"]}}});case 19:return k=e.sent,x=(x=k.namespaces.eip155.accounts)[0].split(":"),E=[x[x.length-1]],k.chainId=T,window.wcSessionForMaroVote=k,_=parseInt(x[1]),e.next=28,n("onNetworkChanged",{netId:_});case 28:try{k.peer&&k.peer.metadata&&k.peer.metadata.name&&k.peer.metadata.name.toLowerCase().includes("exodus")&&r("SET_IS_SIGN_AND_SEND",!0)}catch(e){}e.next=37;break;case 31:return e.prev=31,e.t0=e.catch(12),r("SET_WALLET_STATE",-3),console.info("wallet connect exception:",e.t0),c(new Error("Wallet connect error")),e.abrupt("return");case 37:e.next=50;break;case 39:return e.prev=39,e.next=42,v.enable();case 42:E=e.sent,e.next=50;break;case 45:return e.prev=45,e.t1=e.catch(39),e.next=49,v.request({method:"eth_requestAccounts"});case 49:E=e.sent;case 50:return 0===E.length&&(r("SET_WALLET_STATE",-2),c(new Error("lockedMetamask"))),r("SET_WALLET_STATE",1),j=Object(O.toChecksumAddress)(E[0]),r("IDENTIFY",j),n("setAddress",{address:j}),e.next=57,n("getBalance");case 57:return P=e.sent,P=Object(O.hexToNumberString)(P),n("saveUserBalance",{balance:P}),e.next=62,n("sendAsync",{method:"eth_chainId",params:[]});case 62:R=e.sent,N=Object(O.hexToNumber)(R),n("onNetworkChanged",{netId:N});try{(window.imToken||window.ethereum.isImToken)&&r("SET_IS_IMTOKEN",!0),null!=window.trustProvider&&r("SET_IS_TRUSTWALLET",!0),v.on&&(v.on("accountsChanged",(function(e){return z({dispatch:n,state:d,commit:r,newAccount:e})})),v.on("chainChanged",(function(e){return Y({dispatch:n,state:d,commit:r,netId:e})})),v.on("networkChanged",(function(e){return n("onNetworkChanged",{netId:e})})),v.on("disconnect",(function(){return n("onDisconnect",{connected:!1})})))}catch(e){console.info(e)}A=m["metamask/networkConfig"].supportEIP1559,r("SET_SUPPORT_EIP1559",A);try{I=m["metamask/networkConfig"],y=I.baseFee,(C=I.gasPrice)&&r("SAVE_DEFAULT_GAS_PRICE",C),y&&r("SET_NETWORK_BASEFEE",y)}catch(e){}return r("SET_INITIALIZED",!0),e.next=72,n("common/saveLastUsedProviderName",{providerName:f},{root:!0});case 72:t({netId:N,ethAccount:E[0]}),e.next=78;break;case 75:e.prev=75,e.t2=e.catch(8),c(e.t2);case 78:case"end":return e.stop()}}),e,null,[[8,75],[12,31],[39,45]])})));return function(t,r){return e.apply(this,arguments)}}())},saveUserBalance:function(e,t){(0,e.commit)("SET_BALANCE",t.balance)},fetchETHBalance:(B=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.prev=1,e.next=4,r("getBalance");case 4:n=e.sent,n=Object(O.hexToNumberString)(n),r("saveUserBalance",{balance:n}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])}))),function(e){return B.apply(this,arguments)}),fetchGasPrice:(H=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,w,v,T,k,_,j,P,R,N,A,I,y,C,F,D,G,L,M,W,V,U;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,o=t.commit,c=t.dispatch,m=t.rootGetters,d=t.state,f=r.oracleIndex,l=void 0===f?0:f,h=m["metamask/networkConfig"],w=h.smartContractPollTime,v=h.gasPrice,T=h.gasOracleUrls,k=h.useRPCGasPrice,_=h.supportEIP1559,n.metamask.netId,!d.gasPriceOracleLocked){e.next=8;break}return console.info("GasPrice Oracle locked"),setTimeout((function(){return c("fetchGasPrice",{})}),1e3*w),e.abrupt("return");case 8:if(e.prev=8,!T||!T.length){e.next=45;break}return j=T[l%T.length],P=j.indexOf("etherchain")>-1,R=j.indexOf("codefi.network")>-1,N=j.indexOf("owlracle.info")>-1,A=j.indexOf("etherchain.org/api/gasnow")>-1,I=j.indexOf("debank")>-1,y=j.indexOf("polygon.technology")>-1,e.next=19,Object(S.a)(j);case 19:if(200!==(C=e.sent).status){e.next=41;break}return e.next=23,C.json();case 23:if((F=e.sent).hasOwnProperty("data")&&(F=F.data),D=x({},v),F.slow&&(D.slow=Number(F.slow),Number(F.slow)>Number(Object(O.toWei)("0.001","gwei"))&&(D.slow=Math.ceil(Number(Object(O.fromWei)(Number(F.slow).toString(),"gwei"))))),F.safeLow&&(D.slow=Number(F.safeLow)),F.fast&&(D.fast=Number(F.fast),Number(F.fast)>Number(Object(O.toWei)("0.001","gwei"))&&(D.fast=Math.ceil(Number(Object(O.fromWei)(Number(F.fast).toString(),"gwei"))))),F.standard&&(D.standard=Number(F.standard),Number(F.standard)>Number(Object(O.toWei)("0.001","gwei"))&&(D.standard=Math.ceil(Number(Object(O.fromWei)(Number(F.standard).toString(),"gwei"))))),F.instant&&(D.instant=Number(F.instant)),F.fastest&&(D.instant=Number(F.fastest)),F.rapid&&(D.instant=Number(F.rapid),Number(F.rapid)>Number(Object(O.toWei)("0.001","gwei"))&&(D.instant=Math.ceil(Number(Object(O.fromWei)(Number(F.rapid).toString(),"gwei"))))),_){G=1,L=1,M=2,W=10,V=Number(D.standard);try{P&&!A?(V=Number(F.currentBaseFee),V=Object(E.a)(V).times(Object(E.a)(1.125)).toFixed(2),!isNaN(V)&&V>0&&(G=D.slow,L=D.standard,M=D.fast,W=D.instant)):R?(V=Number(F.estimatedBaseFee),V=Object(E.a)(V).times(Object(E.a)(1.125)).toFixed(2),!isNaN(V)&&V>0&&(G=F.low.suggestedMaxPriorityFeePerGas,L=F.medium.suggestedMaxPriorityFeePerGas,M=F.high.suggestedMaxPriorityFeePerGas,W=Object(E.a)(M).plus(Object(E.a)(2)).toNumber())):y?(V=Number(F.estimatedBaseFee),V=Object(E.a)(V).times(Object(E.a)(1.125)).toFixed(2),!isNaN(V)&&V>0&&(G=F.safeLow.maxPriorityFee,L=F.standard.maxPriorityFee,M=F.fast.maxPriorityFee,Object(E.a)(L).gte(Object(E.a)(L))&&(M=Object(E.a)(L).plus(Object(E.a)(1)).toNumber()),W=Object(E.a)(M).plus(Object(E.a)(2)).toNumber())):N?(U=F.speeds)&&U.length>0&&(U.sort((function(a,b){return a.acceptance-b.acceptance})),V=Number(U[0].baseFee),V=Object(E.a)(V).times(Object(E.a)(1.125)).toFixed(2),G=U[0].maxPriorityFeePerGas,L=U[1].maxPriorityFeePerGas,M=U[2].maxPriorityFeePerGas,Object(E.a)(L).gte(Object(E.a)(L))&&(M=Object(E.a)(L).plus(Object(E.a)(1)).toNumber()),W=Object(E.a)(M).plus(Object(E.a)(2)).toNumber()):(V=Number(D.fast),V=Object(E.a)(V).times(Object(E.a)(1.125)).toFixed(2))}catch(e){}D.slow=Object(E.a)(V).plus(Object(E.a)(G)).toNumber(),D.standard=Object(E.a)(V).plus(Object(E.a)(L)).toNumber(),D.fast=Object(E.a)(V).plus(Object(E.a)(M)).toNumber(),D.instant=Object(E.a)(V).plus(Object(E.a)(W)).toNumber(),o("SET_NETWORK_BASEFEE",V)}D.fast<=D.standard&&(D.fast=Object(E.a)(D.standard).plus(Object(E.a)(2)).toNumber()),D.instant<=D.fast&&(D.instant=Object(E.a)(D.fast).plus(Object(E.a)(4)).toNumber()),I&&(D.slow=Object(E.a)(F.slow.price).div(Object(E.a)(1e9)).toNumber(),D.standard=Object(E.a)(F.normal.price).div(Object(E.a)(1e9)).toNumber(),D.fast=Object(E.a)(F.fast.price).div(Object(E.a)(1e9)).toNumber(),D.instant=Object(E.a)(D.fast).plus(Object(E.a)(7)).toNumber()),o("SAVE_GAS_PRICE",D),e.next=42;break;case 41:throw Error("Fetch gasPrice failed");case 42:setTimeout((function(){return c("fetchGasPrice",{})}),1e3*w),e.next=51;break;case 45:if(null==k||!k){e.next=50;break}return e.next=48,c("fetchGasInfoFromOnChain");case 48:e.next=51;break;case 50:o("SAVE_GAS_PRICE",v);case 51:e.next=57;break;case 53:e.prev=53,e.t0=e.catch(8),l++,setTimeout((function(){return c("fetchGasPrice",{oracleIndex:l})}),1e3*w);case 57:case"end":return e.stop()}}),e,null,[[8,53]])}))),function(e,t){return H.apply(this,arguments)}),fetchGasInfoFromOnChain:(U=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,r=t.rootGetters,t.rootState,n=t.dispatch,t.commit,!r["metamask/networkConfig"].supportEIP1559){e.next=7;break}return e.next=5,n("buildChainGasPriceFromRpcForEIP1559");case 5:e.next=9;break;case 7:return e.next=9,n("buildChainGasPriceFromRpc");case 9:case"end":return e.stop()}}),e)}))),function(e){return U.apply(this,arguments)}),updateGasPrice:(V=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPrices,(c=Object.assign({},o)).fast=40,n("SAVE_GAS_PRICE",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return V.apply(this,arguments)}),buildChainGasPriceFromRpc:(W=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=n["metamask/networkConfig"].gasPrice,e.prev=2,e.next=5,o("fetchGasPriceFromChain");case 5:d=e.sent,f=Object(O.hexToNumberString)(d),Math.ceil(Number(Object(O.fromWei)(f,"gwei"))),l=x({},f),30==r.netId||50==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(.01)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(.02)).toNumber()):421611==r.netId||42161==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(.1)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(1)).toNumber()):56==r.netId||97==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(1)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(5)).toNumber()):42220==r.netId||1285==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(.1)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(.5)).toNumber()):8217==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(0)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(0)).toNumber()):1088==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(.5)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(2)).toNumber()):1313161554==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(.01)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(.03)).toNumber()):88==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(.01)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(.05)).toNumber()):69==r.netId||10==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(.001)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(.005)).toNumber()):314==r.netId||204==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(.1)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(.5)).toNumber()):7341==r.netId?(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=Object(E.a)(l.slow).toNumber(),l.fast=Object(E.a)(l.standard).plus(Object(E.a)(1e-6)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(5e-6)).toNumber()):(l.slow=Number(Object(O.fromWei)(f,"gwei")),l.standard=l.slow,l.fast=Object(E.a)(l.standard).plus(Object(E.a)(1)).toNumber(),l.instant=Object(E.a)(l.fast).plus(Object(E.a)(5)).toNumber()),c("SAVE_GAS_PRICE",l),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.info(e.t0),c("SAVE_GAS_PRICE",m);case 17:case"end":return e.stop()}}),e,null,[[2,13]])}))),function(e){return W.apply(this,arguments)}),buildChainGasPriceFromRpcForEIP1559:(M=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l,h,w,v,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=n["metamask/networkConfig"].gasPrice,e.prev=2,e.next=5,o("fetchBaseFeeFromChain");case 5:return d=e.sent,f=Object(E.a)(Object(O.fromWei)(Object(O.hexToNumberString)(d.baseFeePerGas),"gwei")).times(Object(E.a)(1.25)).toFixed(9),l=x({},m),c("SET_NETWORK_BASEFEE",f),e.next=11,o("fetchPriorityFeePerGasFromChain");case 11:return h=e.sent,e.next=14,o("formatFeeHistory",{result:h,includePending:!1});case 14:return w=e.sent,e.next=17,o("avg",{arr:w.map((function(b){return b.priorityFeePerGas[1]}))});case 17:v=e.sent,S=Object(E.a)(f).plus(Object(E.a)(Object(O.fromWei)(Object(E.a)(v).toString(10),"gwei")).toFixed(9)).toNumber(),l.slow=Object(E.a)(S).plus(Object(E.a)(.1)).toNumber(),l.standard=Object(E.a)(S).plus(Object(E.a)(.1)).toNumber(),l.fast=Object(E.a)(S).plus(Object(E.a)(1)).toNumber(),l.instant=Object(E.a)(S).plus(Object(E.a)(2)).toNumber(),c("SAVE_GAS_PRICE",l),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(2),console.info(e.t0),c("SET_NETWORK_BASEFEE",r.baseFee),c("SAVE_GAS_PRICE",m);case 31:case"end":return e.stop()}}),e,null,[[2,26]])}))),function(e){return M.apply(this,arguments)}),fetchGasPriceFromChain:(L=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,e.abrupt("return",new Promise((function(e,t){var o=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var d,f,l,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=m.retryAttempt,f=void 0===d?1:d,f++,c.prev=2,l={from:r.ethAccount,method:"eth_gasPrice",params:[]},c.next=6,n("metamask/sendAsync",l,{root:!0});case 6:h=c.sent,e(h),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),f>=2?t(c.t0):o({retryAttempt:f});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return m.apply(this,arguments)}}();o({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)}),formatFeeHistory:(G=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,t.commit,n=r.result,o=r.includePending,c=Object(O.hexToNumber)(n.oldestBlock),m=0,d=[],f=function(){var e=[];n.reward[m].forEach((function(t,i){e.push(Number(t))})),d.push({number:c,baseFeePerGas:Number(n.baseFeePerGas[m]),gasUsedRatio:Number(n.gasUsedRatio[m]),priorityFeePerGas:e}),c+=1,m+=1};m<20;)f();return o&&d.push({number:"pending",baseFeePerGas:Number(n.baseFeePerGas[20]),gasUsedRatio:NaN,priorityFeePerGas:[]}),e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)}))),function(e,t){return G.apply(this,arguments)}),avg:(D=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,t.commit,n=r.arr,o=n.reduce((function(a,e){return a+e})),console.info(n),e.abrupt("return",Math.round(o/n.length));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return D.apply(this,arguments)}),fetchPriorityFeePerGasFromChain:(F=Object(c.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,r=t.dispatch,t.commit,e.abrupt("return",new Promise((function(e,t){var n=function(){var o=Object(c.a)(regeneratorRuntime.mark((function o(c){var m,d,f,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return m=c.retryAttempt,d=void 0===m?1:m,d++,o.prev=2,f={method:"eth_feeHistory",params:[20,"latest",[25,50,75]]},o.next=6,r("metamask/sendAsync",f,{root:!0});case 6:l=o.sent,e(l),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),d>=2?t(o.t0):n({retryAttempt:d});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return o.apply(this,arguments)}}();n({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return F.apply(this,arguments)}),fetchBaseFeeFromChain:(C=Object(c.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,r=t.dispatch,t.commit,e.abrupt("return",new Promise((function(e,t){var n=function(){var o=Object(c.a)(regeneratorRuntime.mark((function o(c){var m,d,f,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return m=c.retryAttempt,d=void 0===m?1:m,d++,o.prev=2,f={method:"eth_getBlockByNumber",params:["latest",!1]},o.next=6,r("metamask/sendAsync",f,{root:!0});case 6:l=o.sent,e(l),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),d>=2?t(o.t0):n({retryAttempt:d});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return o.apply(this,arguments)}}();n({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)})},Object(o.a)(n,"updateGasPrice",(y=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPrices,(c=Object.assign({},o)).fast=40,n("SAVE_GAS_PRICE",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})),Object(o.a)(n,"lockGasPriceOracle",(I=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPriceOracleLocked,n("SET_GAS_PRICE_ORACLE_LOCKED",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return I.apply(this,arguments)})),Object(o.a)(n,"getTransactionReceipt",(A=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,o=t.dispatch,t.commit,m=r.txHash,e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(c.a)(regeneratorRuntime.mark((function c(d){var f,l,h,w;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return f=d.retryAttempt,l=void 0===f?1:f,l++,c.prev=2,h={from:n.ethAccount,method:"eth_getTransactionReceipt",params:[m]},c.next=6,o("metamask/sendAsync",h,{root:!0});case 6:w=c.sent,e(w),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),l>=2?t(c.t0):r({retryAttempt:l});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return A.apply(this,arguments)})),Object(o.a)(n,"getTransactionByHash",(N=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,o=t.dispatch,t.commit,m=r.txHash,e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(c.a)(regeneratorRuntime.mark((function c(d){var f,l,h,w;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return f=d.retryAttempt,l=void 0===f?1:f,l++,c.prev=2,h={from:n.ethAccount,method:"eth_getTransactionByHash",params:[m]},c.next=6,o("metamask/sendAsync",h,{root:!0});case 6:w=c.sent,e(w),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),l>=2?t(c.t0):r({retryAttempt:l});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return N.apply(this,arguments)})),Object(o.a)(n,"getTransactionCount",(R=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,address;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,o=t.dispatch,t.commit,address=r.address,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var d,f,l,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=m.retryAttempt,f=void 0===d?1:d,f++,c.prev=2,l={from:n.ethAccount,method:"eth_getTransactionCount",params:[address,"latest"]},c.next=6,o("metamask/sendAsync",l,{root:!0});case 6:h=c.sent,e(h),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),f>=2?t(c.t0):r({retryAttempt:f});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return R.apply(this,arguments)})),Object(o.a)(n,"bulkQueryENS",(P=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,o=t.dispatch,m=t.getters,t.rootGetters,t.state,d=r.names,f=m.networkConfig.rpcCallRetryAttempt,l=["https://mainnet-eth.compound.finance","https://rpc.ankr.com/eth","https://eth.public-rpc.com","https://mainnet.infura.io/v3/bcf5eb7bbef849ad9656d4d78b1f4f65","https://cloudflare-eth.com"],e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var h,w,v,E,S,T,k,x;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return h=m.retryAttempt,v=l[(w=void 0===h?0:h)%l.length],w++,c.prev=3,E=n.metamask.ethAccount,S=[],d.forEach((function(e,i){try{e=Q.hash(e)}catch(t){e=Q.hash("hachi8891bdc901b.eth")}var t="0x3b3b57de"+Object(O.padLeft)(e,64).replace("0x","");S.push({method:"eth_call",params:[{from:E,to:"0x4976fb03c32e5b8cfe2b6ccb31c09ba78ebaba41",data:t},"latest"]})})),(T={params:S}).rpcUrl=v,c.next=11,o("metamask/sendJSONRPCRequest",T,{root:!0});case 11:k=c.sent,x={},k.forEach((function(e,i){var t=d[i];try{x[t]=J.decodeParameter("address",e)}catch(e){x[t]="0x0000000000000000000000000000000000000000"}})),e(x),c.next=21;break;case 17:c.prev=17,c.t0=c.catch(3),console.info(c.t0),w>=f?t(c.t0):r({retryAttempt:w});case 21:case"end":return c.stop()}}),c,null,[[3,17]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return P.apply(this,arguments)})),Object(o.a)(n,"sendRawTransaction",(j=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,t.commit,n=t.dispatch,o=t.getters,t.rootGetters,t.state,m=r.signedData,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(c){var d,f,l,h,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=c.retryAttempt,f=void 0===d?0:d,f++,t.prev=2,l={params:{method:"eth_sendRawTransaction",params:[m]}},h=o.networkConfig.rpcUrl,l.rpcUrl=h,t.next=9,n("metamask/sendJSONRPCRequest",l,{root:!0});case 9:w=t.sent,e(w),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.info(t.t0),f>=3?e(-1):r({retryAttempt:f});case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return j.apply(this,arguments)})),Object(o.a)(n,"sendJSONRPCRequest",(function(e,t){e.state,e.getters,e.rootState;var r=t.params,n=t.rpcUrl;return new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,o){var c,m,d,f,data,l,h,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=parseInt(Date.parse(new Date)),m=!1,Array.isArray(r)?(m=!0,d=[],f=0,r.forEach((function(param,i){param.hasOwnProperty("id")||(param.id=c+f,f+=1),param.jsonrpc="2.0",d.push(param)})),r=d):(r.hasOwnProperty("id")||(r.id=c),r.jsonrpc="2.0"),data=JSON.stringify(r),e.next=7,Object(S.a)(n,{body:data,headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 7:return l=e.sent,e.next=10,l.json();case 10:(h=e.sent).error?o(h.error):m?(w=[],h.forEach((function(e,i){e.error?w.push(e.error):w.push(e.result)})),t(w)):t(h.result),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),o(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())})),Object(o.a)(n,"signAndSendByWC",(_=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,t.commit,n=t.dispatch,o=t.getters,t.rootGetters,t.state,m=r.params,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(c){var d,f,l,h,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=c.retryAttempt,f=void 0===d?0:d,f++,t.prev=2,t.next=5,o.getEthereumProvider();case 5:return l=t.sent,t.next=8,l.request({topic:window.wcSessionForMaroVote.topic,chainId:window.wcSessionForMaroVote.chainId,request:{id:1314,method:"eth_signTransaction",params:m,jsonrpc:"2.0"}});case 8:return h=t.sent,console.info("signedData",h),h.startsWith("0x")||(h="0x"+h),t.next=13,n("sendRawTransaction",{signedData:h});case 13:if(w=t.sent,console.info(w),-1!=w){t.next=19;break}throw Error("Send transaction failed, try it again");case 19:e(w);case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(2),console.info(t.t0),f>=3?e(-1):r({retryAttempt:f});case 26:case"end":return t.stop()}}),t,null,[[2,22]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)})),Object(o.a)(n,"sendAsync",(function(e,t){var r=e.rootState,n=(e.commit,e.dispatch),o=e.getters,m=e.rootGetters,d=e.state,f=t.method,l=t.from,h=t.params;switch(o.netId){case 77:case 99:break;case 100:l=void 0}var w=r.common.isMobile;return new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var c,O,v,E,S,T,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getEthereumProvider();case 2:c=e.sent,!1;try{"kaikas"!=d.providerName||"eth_sendTransaction"!=f&&"eth_signTypedData_v3"!=f||(f=(f=f.replace("eth_","klay_")).replace("TypedData_v3",""))}catch(e){}if("walletConnect"!=d.providerName){e.next=38;break}if(e.prev=6,"eth_sendTransaction"!=f&&"eth_signTransaction"!=f&&"eth_signTypedData_v3"!=f&&"eth_signTypedData"!=f&&"personal_sign"!=f){e.next=22;break}if(!d.signAndSend){e.next=16;break}return e.t0=t,e.next=12,n("signAndSendByWC",{params:h});case 12:e.t1=e.sent,(0,e.t0)(e.t1),e.next=20;break;case 16:return e.next=18,c.request({topic:window.wcSessionForMaroVote.topic,chainId:window.wcSessionForMaroVote.chainId,request:{id:1314,method:f,params:h,jsonrpc:"2.0"}});case 18:(O=e.sent)?t(O):r("Send RPC by walletConnect failed");case 20:e.next=30;break;case 22:return v={params:{method:f,params:h}},E=m["metamask/networkConfig"].rpcUrl,v.rpcUrl=E,e.next=28,n("metamask/sendJSONRPCRequest",v,{root:!0});case 28:S=e.sent,t(S);case 30:e.next=36;break;case 32:e.prev=32,e.t2=e.catch(6),console.info(e.t2,f),r(e.t2);case 36:e.next=39;break;case 38:try{"walletLink"==d.providerName&&"eth_signTypedData_v3"==f&&(h=[h[0],JSON.parse(h[1])]),T={id:520,method:f,params:h,jsonrpc:"2.0",from:l},w&&delete T.from,c.request(T).then((function(e){t(e)})).catch((function(e){r(e)}))}catch(e){k={id:520,method:f,params:h,jsonrpc:"2.0",from:l},w&&delete k.from;try{c.send(k,(function(e,n){e&&r(e),n||((n={}).result=null),n.error?r(n.error):t(n.result)}))}catch(e){c.sendAsync(k,(function(e,n){e&&r(e),n||((n={}).result=null),n.error?r(n.error):t(n.result)}))}}case 39:case"end":return e.stop()}}),e,null,[[6,32]])})));return function(t,r){return e.apply(this,arguments)}}())})),Object(o.a)(n,"sendAsync_custom",(function(e,t){e.state;var r=e.getters,n=t.method,o=t.from,m=t.params;switch(r.netId){case 77:case 99:break;case 100:o=void 0}return new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,c){var d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.customRPCWeb3();case 2:return d=e.sent,console.info(d.currentProvider),e.next=6,r.customRPCProvider();case 6:f=e.sent,console.info(f),console.log("sendAsync `method, from, params`",n,o,m),d.currentProvider.send({method:n,params:m,jsonrpc:"2.0"},(function(e,r){console.info(r),console.info(e),e&&c(e),r.error?c(r.error):t(r.result)}));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())})),n);t.default={namespaced:!0,state:function(){return{ethAccount:null,netId:8848,prepareNetId:8848,currency:"MARO",domainData:{},balance:"0",initialized:!1,address:{value:null,valid:!1},gasPrice:{fast:10,slow:5,standard:5,instant:20},gasPriceInfoLoaded:!1,gasPriceLoading:!1,gasPriceOracleLocked:!1,providerName:"",networkName:"",tokens:[],tokensForTestnet:[],tokenAddress:"",isFetching:!0,ethCoinName:" Native Currency",walletState:1,isImToken:!1,isTrustWallet:!1,signAndSend:!1,isMetamask:!0,walletName:"",ethPrice:0,ethPriceLoaded:!1,qrModalClosed:!1,networkBaseFee:48,supportEIP1559:!1}},getters:Z,mutations:$,actions:ee}}}]);