(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1273:function(t,e,o){"use strict";o(80),o(59),o(45),o(43),o(60),o(61);var r=o(3),n=o(4),c=(o(306),o(30));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var h,d,f={components:{ModalBox:o(654).a},props:{open:{type:Boolean,default:!1},old:{type:String,default:""},proposeId:{type:Number,default:0},isEdit:{type:Boolean,default:!1},inModal:{type:Boolean,default:!0}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)("vote",["proposeStatus","proposeTxHash","txUrl","miniProposeLock"]),{},Object(c.b)("vote",["miniProposeLockH"]),{showBack:function(){return!1},maxWidth:function(){return this.isMobile||!this.inModal?"100%":"500px"}}),created:function(){this.$nextTick(Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))},mounted:function(){this.isEdit&&(this.propose=this.old),this.updateTitle()},data:function(){return{propose:null,title:"",buttonLoading:!1,showError:!1}},watch:{proposeStatus:function(t){1==t&&(this.buttonLoading=!1,this.createSuccess()),-2==t&&(this.buttonLoading=!1)}},methods:{updateTitle:function(){this.isEdit?this.title="Update Propose":this.title="Create Propose"},createSuccess:function(){try{this.$store.dispatch("vote/resetBaseParams",{content:this.propose,edit:this.isEdit})}catch(t){}setTimeout((function(){$nuxt.$bus.$emit("closeModal")}),1e3)},createPropose:(d=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this).showError=!1,this.buttonLoading=!0,!this.propose){t.next=14;break}return t.prev=4,t.next=7,this.$store.dispatch("vote/propose",{propose:this.propose});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),this.buttonLoading=!1;case 12:t.next=17;break;case 14:this.buttonLoading=!1,e.showError=!0,setTimeout((function(){e.showError=!1}),3e3);case 17:case"end":return t.stop()}}),t,this,[[4,9]])}))),function(){return d.apply(this,arguments)}),updatePropose:(h=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this).showError=!1,this.buttonLoading=!0,!this.propose){t.next=14;break}return t.prev=4,t.next=7,this.$store.dispatch("vote/updatePropose",{propose:this.propose,proposeId:this.proposeId});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),this.buttonLoading=!1;case 12:t.next=17;break;case 14:this.buttonLoading=!1,e.showError=!0,setTimeout((function(){e.showError=!1}),3e3);case 17:case"end":return t.stop()}}),t,this,[[4,9]])}))),function(){return h.apply(this,arguments)})}},v=o(48),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ModalBox",{attrs:{title:t.title,showBack:t.showBack,width:t.maxWidth}},[-1==t.proposeStatus||-2==t.proposeStatus?o("b-field",{attrs:{message:""}},[o("b-input",{attrs:{type:"textarea",minlength:"1",maxlength:"100",placeholder:""},model:{value:t.propose,callback:function(e){t.propose=e},expression:"propose"}})],1):t._e(),t._v(" "),t.showError?o("p",{staticClass:"has-text-danger"},[t._v("Proposal cant be empty")]):t._e(),t._v(" "),0==t.proposeStatus||1==t.proposeStatus?o("div",{staticClass:"has-text-white"},[t._v("Your transaction submitted, just wait for a while...")]):t._e(),t._v(" "),t.proposeTxHash?o("div",{staticClass:"c-flex has-text-info margin-v"},[o("a",{staticClass:"has-text-white",attrs:{target:"_blank",href:""+t.txUrl+t.proposeTxHash}},[t._v(t._s(t._f("truncate")(t.proposeTxHash,64)))]),t._v(" "),o("div",{staticClass:"c-right"},[0==t.proposeStatus?o("span",{staticClass:"proposal-loading small"}):t._e(),t._v(" "),1==t.proposeStatus?o("span",[o("b-icon",{staticClass:"has-text-green",attrs:{icon:"check-circle",size:"is-small"}})],1):t._e(),t._v(" "),-2==t.proposeStatus?o("span",[o("b-icon",{attrs:{icon:"close-circle",size:"is-small",type:"is-danger"}})],1):t._e()])]):t._e(),t._v(" "),o("div",{staticClass:"c-flex center-v"},[t.isEdit?o("b-button",{staticClass:"c-button-blue fullwidth",attrs:{loading:t.buttonLoading},on:{click:t.updatePropose}},[t._v("Update")]):o("b-button",{staticClass:"c-button-blue fullwidth",attrs:{loading:t.buttonLoading},on:{click:t.createPropose}},[t._v("Create with Locking "+t._s(t.miniProposeLockH)+" MARO")])],1)],1)}),[],!1,null,null,null);e.a=component.exports}}]);